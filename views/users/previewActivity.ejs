<br/>



<div class="container-fluid">
    <div class="row">
        <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12 text-center">
            <h1 id="activityName"></h1>
        </div>
    </div>
    <br/>
    <div class="row">
        <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
            <div class="carousel slide" id="carousel-510016" data-ride="carousel" data-interval="5000">
                <ol class="carousel-indicators" id="carouselIndicators">
                    <li data-slide-to="0" data-target="#carousel-510016" id="li1">
                    </li>
                    <li data-slide-to="1" data-target="#carousel-510016" id="li2">
                    </li>
                    <li data-slide-to="2" data-target="#carousel-510016" id="li3">
                    </li>
                </ol>
                <div class="carousel-inner" id="carouselInner">
                    <div class="item active" id="item1">
                        <img alt="" src="/images/tmp1.jpeg" id="itemImg1" />
                        <div class="carousel-caption">
                            <p id="itemDesc1">

                            </p>
                        </div>
                    </div>
                    <div class="item" id="item2">
                        <img alt="" src="/images/tmp2.jpeg" id="itemImg2" />
                        <div class="carousel-caption">
                            <p id="itemDesc2">

                            </p>
                        </div>
                    </div>
                    <div class="item" id="item3">
                        <img alt="" src="/images/tmp3.jpeg" id="itemImg3" />
                        <div class="carousel-caption">
                            <p id="itemDesc3">

                            </p>
                        </div>
                    </div>
                </div>
                <a class="left carousel-control" href="#carousel-510016" data-slide="prev"><span class="glyphicon glyphicon-chevron-left"></span></a> <a class="right carousel-control" href="#carousel-510016" data-slide="next"><span class="glyphicon glyphicon-chevron-right"></span></a>
            </div>
        </div>
    </div>
    <br/>
    <br/>
    <div class="row">
        <div class="col-lg-3 col-md-3 col-sm-4 col-xs-12">
            <div class="panel panel-primary">
                <div class="panel-heading">
                    <div class="row">
                        <div class="col-lg-4 col-md-4 col-sm-4 col-xs-4 text-center">
                            参与度
                            <br/>
                            <i class="fa fa-users"> 100</i>
                        </div>
                        <div class="col-lg-4 col-md-4 col-sm-4 col-xs-4 text-center">
                            好评
                            <br/>
                            <i class="fa fa-thumbs-up"> 80</i>
                        </div>
                        <div class="col-lg-4 col-md-4 col-sm-4 col-xs-4 text-center">
                            差评
                            <br/>
                            <i class="fa fa-thumbs-down"> 20</i>
                        </div>
                    </div>
                </div>
                <div class="panel-body">
                    <b>介绍：</b><br/>
                    &nbsp;&nbsp;&nbsp;&nbsp;
                    <p id="activityDesc"></p>
                </div>
                <div class="panel-footer">
                    <address>
                        <strong>联系方式：</strong><br />
                        &nbsp;&nbsp;&nbsp;&nbsp;
                        <p id="contactInfo"></p>
                    </address>
                </div>
            </div>
        </div>
        <div class="col-lg-9 col-md-9 col-sm-8 col-xs-12">
            <div id="contentContainer">

            </div>
        </div>
    </div>
</div>
<script src="/javascripts/ckeditor/ckeditor.js"></script>
<script>
    var exp;
    //设置活动名
    var txt=window.opener.document.getElementById('activityName').value;
    $('#activityName').html(txt);

    //设置活动描述及地址信息
    var activityDesc=window.opener.document.getElementById('activityDesc').value;
    document.getElementById('activityDesc').innerHTML=activityDesc;

    var contactInfo=window.opener.document.getElementById('contactInfo').value;
    document.getElementById('contactInfo').innerHTML=contactInfo;

    //carousel图片一设置
    var pic1=window.opener.document.getElementById('uploadMessage1').innerHTML;
    var pic1Desc=window.opener.document.getElementById('fileText1').value;

    if(pic1!='' && pic1!=null)
    {
        var img=document.getElementById('itemImg1');
        img.setAttribute('src','/tmp/'+pic1);
        var desc=document.getElementById('itemDesc1');
        desc.innerHTML=pic1Desc;
    }
    else
    {
        var li=document.getElementById('li1');
        document.getElementById('carouselIndicators').removeChild(li);

        var item=document.getElementById('item1');
        document.getElementById('carouselInner').removeChild(item);
    }

    //carousel图片二设置
    var pic2=window.opener.document.getElementById('uploadMessage2').innerHTML;
    var pic2Desc=window.opener.document.getElementById('fileText2').value;
    if(pic2!='' && pic2!=null)
    {
        var img=document.getElementById('itemImg2');
        img.setAttribute('src','/tmp/'+pic2);
        var desc=document.getElementById('itemDesc2');
        desc.innerHTML=pic2Desc;
    }
    else
    {
        var li=document.getElementById('li2');
        document.getElementById('carouselIndicators').removeChild(li);

        var item=document.getElementById('item2');
        document.getElementById('carouselInner').removeChild(item);
    }

    //carousel图片三设置
    var pic3=window.opener.document.getElementById('uploadMessage3').innerHTML;
    var pic3Desc=window.opener.document.getElementById('fileText3').value;

    if(pic3!='' && pic3!=null)
    {
        var img=document.getElementById('itemImg3');
        img.setAttribute('src','/tmp/'+pic3);
        var desc=document.getElementById('itemDesc3');
        desc.innerHTML=pic3Desc;
    }
    else
    {
        var li=document.getElementById('li3');
        document.getElementById('carouselIndicators').removeChild(li);

        var item=document.getElementById('item3');
        document.getElementById('carouselInner').removeChild(item);
    }

    //设置模块信息
    var _moduleContent=window.opener.document._moduleContent;
    var _moduleList=window.opener.document._moduleList;
    for(var i in _moduleList)
    {
        var b =document.createElement('b');
        b.innerHTML=_moduleContent[i].moduleName;
        var h3=document.createElement('h3');
        h3.setAttribute('class','panel-title text-center');
        h3.appendChild(b);
        var div_panelhead=document.createElement('div');
        div_panelhead.setAttribute('class','panel-heading');
        div_panelhead.appendChild(h3);
        var div_body=document.createElement('div');
        div_body.setAttribute('class','panel-body');
        var row=document.createElement('div');
        row.setAttribute('class','row');
        div_body.appendChild(row);
        addItemToPanel(row,_moduleList[i].name);

        var panel=document.createElement('div');
        panel.setAttribute('class','panel panel-default');
        panel.appendChild(div_panelhead);
        panel.appendChild(div_body);



        var container=document.getElementById('contentContainer');
        container.appendChild(panel);

    }


    function addItemToPanel(parent,moduleName)
    {
        for(var j in _moduleContent)
        {
            if(_moduleContent[j].moduleName==moduleName)
            {
                //_moduleContent.push({"moduleName":module,"itemName":name,"itemDesc":desc,"image":img,"price":price,"uom":uom,"itemId":id});
                var item=document.createElement('div');
                item.setAttribute('class','thumbnail col-lg-3 col-md-3 col-sm-3 col-xs-4');
                item.setAttribute('id',_moduleContent[j].itemId);

                var itemImg=document.createElement('img');
                itemImg.setAttribute('src',_moduleContent[j].image);
                itemImg.setAttribute('width','100%');
                itemImg.setAttribute('id','thumbNailImgId_'+_moduleContent[j].itemId);
                itemImg.setAttribute('alt',_moduleContent[j].itemDesc);

                var capDiv=document.createElement('div');
                capDiv.setAttribute('class','caption text-center');

                var title=document.createElement('label');
                title.setAttribute('id','thumbNailItemName_'+_moduleContent[j].itemId);
                title.innerHTML=_moduleContent[j].itemName;

                var pp=document.createElement('p');
                var price=document.createElement('label');
                var spliter=document.createElement('label');
                var uom=document.createElement('label');
                price.setAttribute('id','thumbNailUprice_'+_moduleContent[j].itemId);
                price.innerHTML=_moduleContent[j].price;
                uom.setAttribute('id','thumbNailUom_'+_moduleContent[j].itemId);
                uom.innerHTML=_moduleContent[j].uom;
                spliter.innerHTML='/';
                pp.appendChild(price);
                pp.appendChild(spliter);
                pp.appendChild(uom);

                var p2=document.createElement('p');
                var a3=document.createElement('a');
                a3.setAttribute('class','btn btn-info');
                a3.setAttribute('onclick','AddToCart("'+_moduleContent[j].itemId+'")');
                a3.innerHTML='购入';
                var a4=document.createElement('a');
                a4.setAttribute('style','margin-left:15px');
                a4.setAttribute('onclick','seeDetail("'+_moduleContent[j].itemId+'")');
                a4.innerHTML='详细';
                p2.appendChild(a3);
                p2.appendChild(a4);


                capDiv.appendChild(title);
                capDiv.appendChild(pp);
                capDiv.appendChild(p2);

                item.appendChild(itemImg);
                item.appendChild(capDiv);

                parent.appendChild(item);
            }
        }
    }

</script>

